[build]
  base = "."
  command = "npm run build"
  publish = "build"
  environment = { NODE_ENV = "production" }

[dev]
  base = "."
  command = "npm run dev"
  port = 3000
  targetPort = 8080
  publish = "build"

[context.production.environment]
  NEXT_PUBLIC_BACKEND_URL = "https://purple-music-backend.onrender.com"
  NEXT_PUBLIC_SUPABASE_URL = "https://ofkfygqrfenctzitigae.supabase.co"
  NEXT_PUBLIC_SUPABASE_ANON_KEY = "your-anon-key"
  NEXT_PUBLIC_PI_APP_ID = "your-pi-app-id"
  NEXT_PUBLIC_FRONTEND_URL = "https://pmtestnet.netlify.app"
  # Vite-specific env vars used by this app
  VITE_BACKEND_URL = "https://purple-music-backend.onrender.com"
  VITE_SUPABASE_URL = "https://ofkfygqrfenctzitigae.supabase.co"
  VITE_SUPABASE_ANON_KEY = "your-anon-key"
  VITE_SUPABASE_PUBLISHABLE_KEY = "your-anon-key"
  VITE_SUPABASE_FUNCTIONS_URL = "https://ofkfygqrfenctzitigae.functions.supabase.co"
  VITE_PI_SANDBOX = "false"
